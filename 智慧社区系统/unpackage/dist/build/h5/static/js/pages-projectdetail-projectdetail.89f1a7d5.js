(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-projectdetail-projectdetail"],{"1c82":function(e,t,n){"use strict";n.r(t);var r=n("4ece"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"44cc":function(e,t,n){var r=n("724e");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("4f06").default;a("61522fac",r,!0,{sourceMap:!1,shadowMode:!1})},"4ece":function(e,t,n){"use strict";var r=n("4ea4");n("4160"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var a=r(n("1da1")),i=(r(n("3465")),r(n("90a0")),n("dad4")),s=r(n("7bd3")),u={onLoad:function(e){this.type=e.type},mounted:function(){this.init()},components:{homecom:s.default},data:function(){return{form:{name:"",projectname:"",mobile:""},indextype:-1,pickertype:[],enumarr:[],indexuser:-1,pickeruser:[],userarr:[],type:"",flagfk:!0}},methods:{init:function(){this.getEnumsfun()},getEnumsfun:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new e.Request(e.Urls.m().getEnums).modeget();case 2:n=t.sent,r=n.data.projectTypeEnum.option,e.enumarr=r,a=[],r.forEach((function(e,t){a.push(e.label)})),e.pickertype=a;case 8:case"end":return t.stop()}}),t)})))()},getusers:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="",r=e.transval(e.enumarr,"label",e.pickertype[e.indextype],"value"),t.next=4,new e.Request(e.Urls.m().getHpProjectManagers+"?keyWord = "+n+"&projectType="+r).modeget();case 4:a=t.sent,e.userarr=a.data,i=[],e.userarr.forEach((function(e,t){i.push(e.trueName)})),e.pickeruser=i;case 9:case"end":return t.stop()}}),t)})))()},validfun:function(){var e=(0,i.mobileNoTest)(this.form.mobile);e?uni.showToast({title:"手机号验证通过",icon:"none",duration:1e3}):(uni.showToast({title:"手机号验证不通过",icon:"none",duration:1e3}),this.form.mobile="")},submit:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n,r,a,i,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.transval(e.enumarr,"label",e.pickertype[e.indextype],"value"),r=e.transval(e.userarr,"trueName",e.pickeruser[e.indexuser],"sysUserId"),null==r&&(r=""),console.log(e.userarr,"trueName",e.pickeruser[e.indexuser],"sysUserId"),"add"!=e.type){t.next=12;break}return a={approvalSysUserIds:[r],projectName:e.form.projectname,projectType:n},t.next=8,new e.Request(e.Urls.m().hpProjectSave,a).modepost();case 8:i=t.sent,"0"==i.code&&(e.alertobj.diagfun("操作成功"),setTimeout((function(){uni.navigateTo({url:"../projectlist/projectlist"})}),1500)),t.next=17;break;case 12:return s={id:e.type,approvalSysUserIds:[],projectName:e.form.projectname,projectType:n},t.next=15,new e.Request(e.Urls.m().hpProjectUpdate,s).modepost();case 15:u=t.sent,"0"==u.code&&(e.alertobj.diagfun("操作成功"),setTimeout((function(){uni.navigateTo({url:"../projectlist/projectlist"})}),1500));case 17:case"end":return t.stop()}}),t)})))()},PickerChangetype:function(e){this.indextype=e.detail.value,this.getusers(),"访客"==this.pickertype[this.indextype]?this.flagfk=!0:this.flagfk=!1},PickerChangeuser:function(e){this.indexuser=e.detail.value},transval:function(e,t,n,r){for(var a=0;a<e.length;a++){var i=e[a];if(i[t]==n)return i[r]}}}};t.default=u},"56b5":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var r={homecom:n("7bd3").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[n("template",{attrs:{slot:"content"},slot:"content"},[e._v("新建项目")])],2),n("homecom",{staticClass:"homclass"}),n("v-uni-view",{staticClass:"formcontent"},[n("v-uni-form",[n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[n("v-uni-text",{staticClass:"requireclass"},[e._v("*")]),e._v("项目类型")],1),n("v-uni-picker",{attrs:{value:e.form.indextype,range:e.pickertype},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.PickerChangetype.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.indextype>-1?e.pickertype[e.indextype]:"请选择"))])],1)],1),n("v-uni-view",{staticClass:"cu-form-group align-start"},[n("v-uni-view",{staticClass:"title"},[n("v-uni-text",{staticClass:"requireclass"},[e._v("*")]),e._v("项目名称")],1),n("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"请输入项目名称"},model:{value:e.form.projectname,callback:function(t){e.$set(e.form,"projectname",t)},expression:"form.projectname"}})],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[n("v-uni-text",{staticClass:"requireclass"},[e._v("*")]),e._v("访客审批人")],1),n("v-uni-picker",{attrs:{value:e.form.indexuser,range:e.pickeruser},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.PickerChangeuser.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.indexuser>-1?e.pickeruser[e.indexuser]:"请选择"))])],1)],1)],1),n("v-uni-view",{staticClass:"margin-top submitbut"},[n("v-uni-button",{staticClass:"cu-btn block bg-blue margin-tb-sm lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交")])],1)],1)],1)},i=[]},"5ab1":function(e,t,n){"use strict";n.r(t);var r=n("56b5"),a=n("1c82");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("ac40");var s,u=n("f0c5"),c=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,"cb56cbf2",null,!1,r["a"],s);t["default"]=c.exports},"724e":function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,".submitbut[data-v-cb56cbf2]{padding:15px}",""]),e.exports=t},ac40:function(e,t,n){"use strict";var r=n("44cc"),a=n.n(r);a.a}}]);